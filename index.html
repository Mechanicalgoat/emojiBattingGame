<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>çµµæ–‡å­—ãƒãƒƒãƒ†ã‚£ãƒ³ã‚°ã‚²ãƒ¼ãƒ </title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="game-container">
        <div class="game-header">
            <h1>âš¾ çµµæ–‡å­—ãƒãƒƒãƒ†ã‚£ãƒ³ã‚°ã‚²ãƒ¼ãƒ  âš¾</h1>
            <div class="score-board">
                <span>æ®‹ã‚Š: <span id="balls-left">10</span>çƒ</span>
                <span>ãƒ›ãƒ¼ãƒ ãƒ©ãƒ³: <span id="home-run-count">0/3</span>æœ¬</span>
            </div>
        </div>
        
        <div class="game-field">
            <!-- ã‚¹ã‚¿ã‚¸ã‚¢ãƒ èƒŒæ™¯ -->
            <div class="stadium-background"></div>
            
            <!-- 3Dè¦ç´ ã®ã‚³ãƒ³ãƒ†ãƒŠ -->
            <div class="field-ground"></div>
            <div class="stands"></div>
            <div class="infield"></div>
            <div class="pitcher-mound"></div>
            
            <!-- ã‚¹ã‚³ã‚¢ãƒœãƒ¼ãƒ‰ -->
            <div class="scoreboard">
                <div class="scoreboard-display">NPB</div>
            </div>
            
            <!-- ãƒ™ãƒ¼ã‚¹ -->
            <div class="home-plate">â¬œ</div>
            <div class="first-base">â¬œ</div>
            <div class="second-base">â¬œ</div>
            <div class="third-base">â¬œ</div>
            
            <!-- ãƒ”ãƒƒãƒãƒ£ãƒ¼ã¨ãƒãƒƒã‚¿ãƒ¼ -->
            <div class="pitcher">ğŸ§</div>
            <div class="batter-box"></div>
            <div class="batter" id="batter">ğŸ</div>
            
            <!-- ãƒœãƒ¼ãƒ«ã¨æ‰“æ’ƒã‚¾ãƒ¼ãƒ³ -->
            <div id="ball" class="ball">âš¾</div>
            <div id="strike-zone" class="strike-zone">
                <div class="zone-text">ã“ã“ã§ãƒãƒƒãƒˆã‚’æŒ¯ã‚‹</div>
            </div>
            
            <!-- é£›è·é›¢ãƒ¡ãƒ¼ã‚¿ãƒ¼ -->
            <div class="distance-meter">
                <span id="distance-value">0</span>m
            </div>
            
            <!-- ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ä¿¯ç°å›³ (ãƒ›ãƒ¼ãƒ ãƒ©ãƒ³æ™‚ã«è¡¨ç¤º) -->
            <div class="field-overview">
                <h2>ãƒ›ãƒ¼ãƒ ãƒ©ãƒ³ï¼</h2>
                <div class="field-map">
                    <div class="field-map-home">â¬œ</div>
                    <div id="ball-landing" class="ball-landing"></div>
                </div>
                <p>é£›è·é›¢: <span id="overview-distance">0</span>m</p>
                <button class="close-overview">é–‰ã˜ã‚‹</button>
            </div>
        </div>
        
        <div class="game-controls">
            <button id="start-button">ã‚²ãƒ¼ãƒ ã‚¹ã‚¿ãƒ¼ãƒˆ</button>
            <div id="result-message" class="result-message"></div>
        </div>
    </div>

    <script>
    // ç›´æ¥ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’åŸ‹ã‚è¾¼ã‚“ã§ç¢ºå®Ÿã«å®Ÿè¡Œã•ã‚Œã‚‹ã‚ˆã†ã«ã™ã‚‹
    document.addEventListener('DOMContentLoaded', () => {
        // é›£æ˜“åº¦è¨­å®š
        window.difficultySettings = {
            easy: {
                ballSpeed: 2000,
                strikeZoneSize: 1.2,
                hitWindow: 600,
                requiredHomeRuns: 2,
                pitcherEmoji: 'ğŸ§'
            },
            normal: {
                ballSpeed: 1500,
                strikeZoneSize: 1.0,
                hitWindow: 400,
                requiredHomeRuns: 3,
                pitcherEmoji: 'ğŸ§â€â™‚ï¸'
            },
            hard: {
                ballSpeed: 1000,
                strikeZoneSize: 0.8,
                hitWindow: 200,
                requiredHomeRuns: 5,
                pitcherEmoji: 'ğŸƒâ€â™‚ï¸'
            }
        };

        // ç¾åœ¨ã®é›£æ˜“åº¦
        window.currentDifficulty = 'normal';
        
        // ã‚²ãƒ¼ãƒ è¦ç´ ã‚’å–å¾—
        const startButton = document.getElementById('start-button');
        const ballsLeftElement = document.getElementById('balls-left');
        const homeRunCountElement = document.getElementById('home-run-count');
        const resultMessageElement = document.getElementById('result-message');
        const ball = document.getElementById('ball');
        const strikeZone = document.getElementById('strike-zone');
        const batter = document.getElementById('batter');
        const pitcher = document.querySelector('.pitcher');
        const gameField = document.querySelector('.game-field');
        const distanceMeter = document.querySelector('.distance-meter');
        const distanceValue = document.getElementById('distance-value');
        const fieldOverview = document.querySelector('.field-overview');
        const ballLanding = document.getElementById('ball-landing');
        const overviewDistance = document.getElementById('overview-distance');
        const closeOverviewButton = document.querySelector('.close-overview');
        const scoreboard = document.querySelector('.scoreboard-display');

        // ã‚²ãƒ¼ãƒ å¤‰æ•°
        let ballsLeft = 10;
        let homeRunCount = 0;
        let isGameActive = false;
        let canSwing = false;
        let currentBallPosition = { x: 0, y: 0, z: 0 };
        let ballTrajectory = [];
        
        // ç¾åœ¨ã®é›£æ˜“åº¦ã«åŸºã¥ãè¨­å®š
        const settings = window.difficultySettings[window.currentDifficulty];
        
        // ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã‚µã‚¤ã‚ºã‚’å–å¾— (ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°ç”¨)
        const fieldRect = gameField.getBoundingClientRect();
        const fieldWidth = fieldRect.width;
        const fieldHeight = fieldRect.height;

        // ã‚¹ã‚¿ãƒ¼ãƒˆãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
        startButton.addEventListener('click', startGame);

        // ã‚¹ãƒˆãƒ©ã‚¤ã‚¯ã‚¾ãƒ¼ãƒ³ã®ãƒã‚¦ã‚¹ã‚¤ãƒ™ãƒ³ãƒˆ
        strikeZone.addEventListener('mousemove', (e) => {
            if (isGameActive) {
                // ãƒã‚¦ã‚¹ä½ç½®ã«ãƒãƒƒãƒˆã‚’ç§»å‹•
                const rect = strikeZone.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                batter.style.left = `${e.clientX - gameField.getBoundingClientRect().left}px`;
                batter.style.bottom = '60px'; // ã‚¹ãƒˆãƒ©ã‚¤ã‚¯ã‚¾ãƒ¼ãƒ³ã¨åŒã˜é«˜ã•ã«
                batter.style.transform = 'translateX(-50%)';
            }
        });

        // ã‚¹ãƒˆãƒ©ã‚¤ã‚¯ã‚¾ãƒ¼ãƒ³ã‚‚ã‚¯ãƒªãƒƒã‚¯ã§ãã‚‹ã‚ˆã†ã«å†è¿½åŠ 
        strikeZone.addEventListener('click', (e) => {
            if (isGameActive && canSwing) {
                swing(e);
            }
        });
        
        // ã‚²ãƒ¼ãƒ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å…¨ä½“ã‚’ã‚¯ãƒªãƒƒã‚¯å¯èƒ½ã«
        gameField.addEventListener('click', (e) => {
            // ãƒœãƒ¼ãƒ«ã‚„ã‚¹ãƒˆãƒ©ã‚¤ã‚¯ã‚¾ãƒ¼ãƒ³ã§ãªã„å ´æ‰€ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ãŸå ´åˆ
            if (isGameActive && canSwing && e.target !== ball && e.target !== strikeZone) {
                swing(e);
            }
        });
        
        // ä¿¯ç°å›³ã‚’é–‰ã˜ã‚‹ãƒœã‚¿ãƒ³
        if (closeOverviewButton) {
            closeOverviewButton.addEventListener('click', () => {
                fieldOverview.style.display = 'none';
                // æ¬¡ã®æŠ•çƒã¸
                setTimeout(throwBall, 500);
            });
        }

        // ã‚²ãƒ¼ãƒ é–‹å§‹é–¢æ•°
        function startGame() {
            console.log("ã‚²ãƒ¼ãƒ é–‹å§‹!");
            if (isGameActive) return;

            // ã‚²ãƒ¼ãƒ å¤‰æ•°ã®ãƒªã‚»ãƒƒãƒˆ
            ballsLeft = 10;
            homeRunCount = 0;
            isGameActive = true;
            updateUI();

            startButton.textContent = 'ã‚²ãƒ¼ãƒ ä¸­...';
            startButton.disabled = true;
            if (resultMessageElement) resultMessageElement.textContent = '';
            if (fieldOverview) fieldOverview.style.display = 'none';
            
            // ã‚¹ã‚³ã‚¢ãƒœãƒ¼ãƒ‰æ›´æ–°
            updateScoreboard('PLAY BALL!');

            // ãƒãƒƒãƒˆã®åˆæœŸä½ç½®
            batter.style.position = 'absolute';
            batter.style.bottom = '60px';
            batter.style.left = '50%';
            batter.style.transform = 'translateX(-50%)';

            // æœ€åˆã®æŠ•çƒã‚’é–‹å§‹
            throwBall();
        }

        // ã‚¹ã‚³ã‚¢ãƒœãƒ¼ãƒ‰æ›´æ–°
        function updateScoreboard(text) {
            if (scoreboard) {
                scoreboard.textContent = text;
            }
        }

        // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ã‚’ç°¡ç•¥åŒ–ã—ã¦ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹å‘ä¸Š
        function simpleAnimation(from, to, duration, onUpdate, onComplete) {
            const startTime = performance.now();
            
            function animate(currentTime) {
                const elapsed = currentTime - startTime;
                const progress = Math.min(elapsed / duration, 1);
                
                onUpdate(from + (to - from) * progress);
                
                if (progress < 1) {
                    requestAnimationFrame(animate);
                } else if (onComplete) {
                    onComplete();
                }
            }
            
            requestAnimationFrame(animate);
        }
        
        // æŠ•çƒé–¢æ•°ã‚’ç°¡ç•¥åŒ–
        function throwBall() {
            if (ballsLeft <= 0) {
                endGame();
                return;
            }

            // ãƒœãƒ¼ãƒ«ã‚’åˆæœŸä½ç½®ã«è¨­å®šï¼ˆãƒ”ãƒƒãƒãƒ£ãƒ¼ãƒã‚¸ã‚·ãƒ§ãƒ³ï¼‰
            ball.style.left = '50%';
            ball.style.bottom = '250px';
            ball.style.transform = 'translate(-50%, -50%) scale(0.8)';
            ball.style.visibility = 'visible';
            ball.style.transition = 'none';
            ball.style.zIndex = '15';
            
            // ã‚¯ãƒ©ã‚¹ã‚’ãƒªã‚»ãƒƒãƒˆ
            ball.classList.remove('home-run');
            ball.classList.remove('ball-through');
            
            // é£›è·é›¢ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’éè¡¨ç¤º
            if (distanceMeter) distanceMeter.style.display = 'none';
            
            // ãƒ”ãƒƒãƒãƒ£ãƒ¼ã®ãƒ¢ãƒ¼ã‚·ãƒ§ãƒ³
            pitcher.textContent = 'ğŸ¤¾';
            
            // ã‚¹ãƒˆãƒ©ã‚¤ã‚¯ã‚¾ãƒ¼ãƒ³å†…ã®ãƒ©ãƒ³ãƒ€ãƒ ãªä½ç½®ã‚’è¨ˆç®—
            const zoneRect = strikeZone.getBoundingClientRect();
            const fieldRect = gameField.getBoundingClientRect();
            
            // ã‚¿ãƒ¼ã‚²ãƒƒãƒˆä½ç½®ã‚’è¨ˆç®—
            const zoneCenterX = zoneRect.left + zoneRect.width / 2 - fieldRect.left;
            const zoneCenterY = fieldRect.bottom - zoneRect.top - zoneRect.height / 2;
            
            const randomOffsetX = (Math.random() - 0.5) * zoneRect.width * 0.8;
            const randomOffsetY = (Math.random() - 0.5) * zoneRect.height * 0.8;
            
            const targetX = zoneCenterX + randomOffsetX;
            const targetY = zoneCenterY + randomOffsetY;
            
            setTimeout(() => {
                // é›£æ˜“åº¦ã«å¿œã˜ãŸãƒ”ãƒƒãƒãƒ£ãƒ¼çµµæ–‡å­—ã‚’ä½¿ç”¨
                pitcher.textContent = settings.pitcherEmoji;
                
                // ãƒœãƒ¼ãƒ«ã‚’æŠ•ã’ã‚‹ - ã‚·ãƒ³ãƒ—ãƒ«ãªç›´ç·šé‹å‹•
                ball.style.transition = `all ${settings.ballSpeed/1000}s ease-in`;
                ball.style.left = `${targetX}px`;
                ball.style.bottom = `${targetY}px`;
                ball.style.transform = 'translate(-50%, -50%) scale(1)';
                
                canSwing = true;
                
                // ã‚¹ã‚¤ãƒ³ã‚°å¾…æ©Ÿæ™‚é–“
                setTimeout(() => {
                    if (canSwing) {
                        // è¦‹é€ƒã—ãŸå ´åˆ
                        canSwing = false;
                        ballsLeft--;
                        updateUI();
                        if (resultMessageElement) resultMessageElement.textContent = 'è¦‹é€ƒã—ï¼';
                        
                        // ã‚¹ã‚³ã‚¢ãƒœãƒ¼ãƒ‰æ›´æ–°
                        updateScoreboard('BALL!');
                        
                        // ãƒœãƒ¼ãƒ«ã‚’é€šéã•ã›ã‚‹
                        ball.style.transition = 'all 0.4s ease-in';
                        ball.style.bottom = '-50px';
                        
                        // æ¬¡ã®æŠ•çƒ
                        setTimeout(throwBall, 1000);
                    }
                }, settings.hitWindow);
            }, 300);
        }

        // ã‚¹ã‚¤ãƒ³ã‚°é–¢æ•°
        function swing(e) {
            if (!canSwing) return;
            
            canSwing = false;
            ballsLeft--;

            // ãƒãƒƒãƒˆã‚’ã‚¹ã‚¤ãƒ³ã‚°
            batter.classList.add('swing');
            setTimeout(() => {
                batter.classList.remove('swing');
            }, 300);

            // ãƒ’ãƒƒãƒˆã‚¨ãƒ•ã‚§ã‚¯ãƒˆ
            createHitEffect(e.clientX, e.clientY);

            // ãƒœãƒ¼ãƒ«ã¨ã®è¡çªåˆ¤å®š
            const ballRect = ball.getBoundingClientRect();
            const batterRect = batter.getBoundingClientRect();
            
            const ballCenterX = ballRect.left + ballRect.width/2;
            const ballCenterY = ballRect.top + ballRect.height/2;
            
            const batterCenterX = batterRect.left + batterRect.width/2;
            const batterCenterY = batterRect.top + batterRect.height/2;
            
            const distance = Math.sqrt(
                Math.pow(ballCenterX - batterCenterX, 2) + 
                Math.pow(ballCenterY - batterCenterY, 2)
            );

            // é›£æ˜“åº¦ã«åŸºã¥ããƒ’ãƒƒãƒˆåˆ¤å®šã®è·é›¢
            const hitDistance = 200;

            if (distance < hitDistance) { // é›£æ˜“åº¦ã«å¿œã˜ãŸãƒ’ãƒƒãƒˆåˆ¤å®š
                // ãƒ›ãƒ¼ãƒ ãƒ©ãƒ³ï¼
                homeRunCount++;
                const homeRunDistance = calculateHomeRunDistance();
                
                // é£›è·é›¢ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’è¡¨ç¤º
            if (distanceMeter) {
                distanceMeter.style.display = 'block';
                distanceValue.textContent = homeRunDistance;
            }
                
            // ã‚¹ã‚³ã‚¢ãƒœãƒ¼ãƒ‰æ›´æ–°
            updateScoreboard('HOME RUN!');
                
            // ãƒ›ãƒ¼ãƒ ãƒ©ãƒ³è»Œé“ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
            animateHomeRun(homeRunDistance);
                
            if (resultMessageElement) resultMessageElement.textContent = `ãƒ›ãƒ¼ãƒ ãƒ©ãƒ³ï¼ ${homeRunDistance}mé£›ã‚“ã ï¼`;
            } else {
                // ç©ºæŒ¯ã‚Š
                if (resultMessageElement) resultMessageElement.textContent = 'ç©ºæŒ¯ã‚Šï¼';
                
                // ã‚¹ã‚³ã‚¢ãƒœãƒ¼ãƒ‰æ›´æ–°
                updateScoreboard('STRIKE!');
                
                // ãƒœãƒ¼ãƒ«ã‚’é€šéã•ã›ã‚‹
                ball.style.transition = 'all 0.4s ease-in';
                ball.style.bottom = '-50px';
                
                // æ¬¡ã®æŠ•çƒ
                setTimeout(throwBall, 1200);
            }

            updateUI();
        }
        
        // ãƒ›ãƒ¼ãƒ ãƒ©ãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        function animateHomeRun(distance) {
            // è»Œé“ã«å¿œã˜ãŸè§’åº¦ã¨è·é›¢ã‚’è¨ˆç®—
            const angle = Math.random() * 60 - 30; // -30åº¦ã‹ã‚‰30åº¦ã®ãƒ©ãƒ³ãƒ€ãƒ ãªè§’åº¦
            const angleRad = angle * Math.PI / 180;
            
            // ãƒœãƒ¼ãƒ«ã®é£›è·é›¢ã«å¿œã˜ãŸä½ç½®ã‚’è¨ˆç®—
            const normalizedDistance = Math.min(distance / 150, 1); // 150mã‚’æœ€å¤§ã¨ã™ã‚‹
            
            // ç°¡ç•¥åŒ–ã—ãŸã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
            let progress = 0;
            const animationInterval = setInterval(() => {
                progress += 0.05;
                
                if (progress >= 1) {
                    clearInterval(animationInterval);
                    
                    // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®Œäº†æ™‚
                    ball.style.visibility = 'hidden';
                    
                    // ä¿¯ç°å›³ã‚’è¡¨ç¤ºï¼ˆå­˜åœ¨ã™ã‚‹å ´åˆï¼‰
                    if (fieldOverview && ballLanding && overviewDistance) {
                        fieldOverview.style.display = 'flex';
                        
                        // ãƒ©ãƒ³ãƒ‡ã‚£ãƒ³ã‚°åœ°ç‚¹ã®è¡¨ç¤ºï¼ˆè§’åº¦ã¨è·é›¢ã‹ã‚‰è¨ˆç®—ï¼‰
                        const landingX = 150 + Math.sin(angleRad) * normalizedDistance * 120;
                        const landingY = 50 + normalizedDistance * 200;
                        
                        ballLanding.style.left = `${landingX}px`;
                        ballLanding.style.top = `${landingY}px`;
                        
                        overviewDistance.textContent = distance;
                    } else {
                        // ä¿¯ç°å›³ãŒãªã„å ´åˆã¯æ¬¡ã®æŠ•çƒã¸
                        setTimeout(throwBall, 1500);
                    }
                    return;
                }
                
                // æ”¾ç‰©ç·šã®å¼: y = x - xÂ²
                const x = progress;
                const y = x - Math.pow(x/1.5, 2);
                
                // xæˆåˆ†ã®è¨ˆç®—ï¼ˆè§’åº¦ã‚’è€ƒæ…®ï¼‰
                const xOffset = normalizedDistance * 300 * Math.sin(angleRad) * progress;
                const xPos = fieldWidth/2 + xOffset;
                
                // yæˆåˆ†ã®è¨ˆç®—ï¼ˆæ”¾ç‰©ç·šï¼‰
                const yPos = 50 + y * 300;
                
                // ã‚¹ã‚±ãƒ¼ãƒ«ï¼ˆé è¿‘æ„Ÿï¼‰
                const scale = Math.max(0.1, 1 - progress * 0.9);
                
                // ãƒœãƒ¼ãƒ«ã®ä½ç½®ã‚’æ›´æ–°
                ball.style.transition = 'none';
                ball.style.left = `${xPos}px`;
                ball.style.bottom = `${yPos}px`;
                ball.style.transform = `translate(-50%, -50%) scale(${scale})`;
            }, 30);
        }

        // ãƒ›ãƒ¼ãƒ ãƒ©ãƒ³è·é›¢ã®è¨ˆç®—
        function calculateHomeRunDistance() {
            // é›£æ˜“åº¦ã¨ä¹±æ•°ã‚’çµ„ã¿åˆã‚ã›ã¦é£›è·é›¢ã‚’è¨ˆç®—
            const basePower = Math.random() * 70 + 80; // 80ã€œ150mã®ãƒ™ãƒ¼ã‚¹é£›è·é›¢
            // é›£ã—ã„ã»ã©é£›è·é›¢ãŒå‡ºã‚‹ç¢ºç‡ãŒé«˜ã„ï¼ˆä¸Šç´šè€…å‘ã‘ï¼‰
            const difficultyBonus = (window.currentDifficulty === 'hard') ? 20 : 
                                   (window.currentDifficulty === 'easy') ? -10 : 0;
            
            return Math.floor(basePower + difficultyBonus);
        }

        // ãƒ’ãƒƒãƒˆã‚¨ãƒ•ã‚§ã‚¯ãƒˆã®ä½œæˆ
        function createHitEffect(x, y) {
            const effect = document.createElement('div');
            effect.className = 'hit-effect';
            effect.textContent = 'ğŸ’¥';
            effect.style.left = `${x}px`;
            effect.style.top = `${y}px`;
            gameField.appendChild(effect);
            
            // ã‚¨ãƒ•ã‚§ã‚¯ãƒˆã‚’ä¸€å®šæ™‚é–“å¾Œã«å‰Šé™¤
            setTimeout(() => {
                if (effect.parentNode === gameField) {
                    gameField.removeChild(effect);
                }
            }, 500);
        }

        // UIæ›´æ–°é–¢æ•°
        function updateUI() {
            // å¿…è¦ãªãƒ›ãƒ¼ãƒ ãƒ©ãƒ³æ•°ï¼ˆé›£æ˜“åº¦ã«ã‚ˆã‚‹ï¼‰
            const requiredHomeRuns = settings.requiredHomeRuns || 3;
            
            if (ballsLeftElement) ballsLeftElement.textContent = ballsLeft;
            if (homeRunCountElement) homeRunCountElement.textContent = `${homeRunCount}/${requiredHomeRuns}`;
        }

        // ã‚²ãƒ¼ãƒ çµ‚äº†å‡¦ç†
        function endGame() {
            isGameActive = false;
            startButton.disabled = false;
            startButton.textContent = 'ã‚‚ã†ä¸€åº¦ãƒ—ãƒ¬ã‚¤';
            
            // å¿…è¦ãªãƒ›ãƒ¼ãƒ ãƒ©ãƒ³æ•°ï¼ˆé›£æ˜“åº¦ã«ã‚ˆã‚‹ï¼‰
            const requiredHomeRuns = settings.requiredHomeRuns || 3;
            
            // ã‚¹ã‚³ã‚¢ãƒœãƒ¼ãƒ‰æ›´æ–°
            if (homeRunCount >= requiredHomeRuns) {
                updateScoreboard('GAME CLEAR!');
            } else {
                updateScoreboard('GAME OVER');
            }
            
            // çµæœãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
            if (resultMessageElement) {
                if (homeRunCount >= requiredHomeRuns) {
                    resultMessageElement.textContent = `ã‚¯ãƒªã‚¢ï¼ ${homeRunCount}æœ¬ã®ãƒ›ãƒ¼ãƒ ãƒ©ãƒ³ã‚’æ‰“ã¡ã¾ã—ãŸï¼`;
                    resultMessageElement.style.color = '#4caf50';
                } else {
                    resultMessageElement.textContent = `æ®‹å¿µï¼ ã‚¯ãƒªã‚¢ã«ã¯${requiredHomeRuns}æœ¬å¿…è¦ã§ã™ï¼ˆ${homeRunCount}æœ¬ï¼‰`;
                    resultMessageElement.style.color = '#f44336';
                }
            }
        }
        
        // åˆæœŸUIæ›´æ–°
        updateUI();
    });
    </script>
</body>
</html>
